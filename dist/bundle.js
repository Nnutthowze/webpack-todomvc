!function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/src/",e(e.s=2)}([function(t,e,o){"use strict";function i(t,e){return(e||document).querySelector(t)}function n(t,e){return(e||document).querySelectorAll(t)}function r(t,e,o,i){t.addEventListener(e,o,!!i)}function l(t,e,o,i){function l(o){var r=o.target,l=n(e,t);Array.prototype.indexOf.call(l,r)>=0&&i.call(r,o)}r(t,o,l,"blur"===o||"focus"===o)}function c(t,e){if(t.parentNode)return t.parentNode.tagName.toLowerCase()===e.toLowerCase()?t.parentNode:c(t.parentNode,e)}o.d(e,"b",function(){return i}),o.d(e,"c",function(){return n}),o.d(e,"a",function(){return r}),o.d(e,"e",function(){return l}),o.d(e,"d",function(){return c}),NodeList.prototype.forEach=Array.prototype.forEach},function(t,e,o){"use strict";function i(t){this.storage=new d.a(t),this.model=new a.a(this.storage),this.template=new s.a,this.view=new l.a(this.template),this.controller=new c.a(this.model,this.view)}function n(){new i("todos-vanillajs").controller.setView(document.location.hash)}var r=o(8),l=(o.n(r),o(7)),c=o(3),a=o(4),d=o(5),s=o(6);o.d(e,"a",function(){return n})},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),n=o(0);o.i(n.a)(window,"load",i.a),o.i(n.a)(window,"hashchange",i.a)},function(t,e,o){"use strict";function i(t,e){var o=this;o.model=t,o.view=e,o.view.bind("newTodo",function(t){o.addItem(t)}),o.view.bind("itemEdit",function(t){o.editItem(t.id)}),o.view.bind("itemEditDone",function(t){o.editItemSave(t.id,t.title)}),o.view.bind("itemEditCancel",function(t){o.editItemCancel(t.id)}),o.view.bind("itemRemove",function(t){o.removeItem(t.id)}),o.view.bind("itemToggle",function(t){o.toggleComplete(t.id,t.completed)}),o.view.bind("removeCompleted",function(){o.removeCompletedItems()}),o.view.bind("toggleAll",function(t){o.toggleAll(t.completed)})}i.prototype.setView=function(t){var e=t.split("/")[1],o=e||"";this._updateFilterState(o)},i.prototype.showAll=function(){var t=this;t.model.read(function(e){t.view.render("showEntries",e)})},i.prototype.showActive=function(){var t=this;t.model.read({completed:!1},function(e){t.view.render("showEntries",e)})},i.prototype.showCompleted=function(){var t=this;t.model.read({completed:!0},function(e){t.view.render("showEntries",e)})},i.prototype.addItem=function(t){var e=this;""!==t.trim()&&e.model.create(t,function(){e.view.render("clearNewTodo"),e._filter(!0)})},i.prototype.editItem=function(t){var e=this;e.model.read(t,function(o){e.view.render("editItem",{id:t,title:o[0].title})})},i.prototype.editItemSave=function(t,e){var o=this;e.trim()?o.model.update(t,{title:e},function(){o.view.render("editItemDone",{id:t,title:e})}):o.removeItem(t)},i.prototype.editItemCancel=function(t){var e=this;e.model.read(t,function(o){e.view.render("editItemDone",{id:t,title:o[0].title})})},i.prototype.removeItem=function(t){var e=this;e.model.remove(t,function(){e.view.render("removeItem",t)}),e._filter()},i.prototype.removeCompletedItems=function(){var t=this;t.model.read({completed:!0},function(e){e.forEach(function(e){t.removeItem(e.id)})}),t._filter()},i.prototype.toggleComplete=function(t,e,o){var i=this;i.model.update(t,{completed:e},function(){i.view.render("elementComplete",{id:t,completed:e})}),o||i._filter()},i.prototype.toggleAll=function(t){var e=this;e.model.read({completed:!t},function(o){o.forEach(function(o){e.toggleComplete(o.id,t,!0)})}),e._filter()},i.prototype._updateCount=function(){var t=this;t.model.getCount(function(e){t.view.render("updateElementCount",e.active),t.view.render("clearCompletedButton",{completed:e.completed,visible:e.completed>0}),t.view.render("toggleAll",{checked:e.completed===e.total}),t.view.render("contentBlockVisibility",{visible:e.total>0})})},i.prototype._filter=function(t){var e=this._activeRoute.charAt(0).toUpperCase()+this._activeRoute.substr(1);this._updateCount(),(t||"All"!==this._lastActiveRoute||this._lastActiveRoute!==e)&&this["show"+e](),this._lastActiveRoute=e},i.prototype._updateFilterState=function(t){this._activeRoute=t,""===t&&(this._activeRoute="All"),this._filter(),this.view.render("setFilter",t)},e.a=i},function(t,e,o){"use strict";function i(t){this.storage=t}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i.prototype.create=function(t,e){t=t||"",e=e||function(){};var o={title:t.trim(),completed:!1};this.storage.save(o,e)},i.prototype.read=function(t,e){var o=void 0===t?"undefined":n(t);if(e=e||function(){},"function"===o)return e=t,this.storage.findAll(e);"string"===o||"number"===o?(t=parseInt(t,10),this.storage.find({id:t},e)):this.storage.find(t,e)},i.prototype.update=function(t,e,o){this.storage.save(e,o,t)},i.prototype.remove=function(t,e){this.storage.remove(t,e)},i.prototype.removeAll=function(t){this.storage.drop(t)},i.prototype.getCount=function(t){var e={active:0,completed:0,total:0};this.storage.findAll(function(o){o.forEach(function(t){t.completed?e.completed++:e.active++,e.total++}),t(e)})},e.a=i},function(t,e,o){"use strict";function i(t,e){if(e=e||function(){},this._dbName=t,!localStorage[t]){var o={todos:[]};localStorage[t]=JSON.stringify(o)}e.call(this,JSON.parse(localStorage[t]))}i.prototype.find=function(t,e){if(e){var o=JSON.parse(localStorage[this._dbName]).todos;e.call(this,o.filter(function(e){for(var o in t)if(t[o]!==e[o])return!1;return!0}))}},i.prototype.findAll=function(t){t=t||function(){},t.call(this,JSON.parse(localStorage[this._dbName]).todos)},i.prototype.save=function(t,e,o){var i=JSON.parse(localStorage[this._dbName]),n=i.todos;if(e=e||function(){},o){for(var r=0;r<n.length;r++)if(n[r].id===o){for(var l in t)t.hasOwnProperty(l)&&(n[r][l]=t[l]);break}localStorage[this._dbName]=JSON.stringify(i),e.call(this,JSON.parse(localStorage[this._dbName]).todos)}else t.id=(new Date).getTime(),n.push(t),localStorage[this._dbName]=JSON.stringify(i),e.call(this,[t])},i.prototype.remove=function(t,e){for(var o=JSON.parse(localStorage[this._dbName]),i=o.todos,n=0;n<i.length;n++)if(i[n].id==t){i.splice(n,1);break}localStorage[this._dbName]=JSON.stringify(o),e.call(this,JSON.parse(localStorage[this._dbName]).todos)},i.prototype.drop=function(t){localStorage[this._dbName]=JSON.stringify({todos:[]}),t.call(this,JSON.parse(localStorage[this._dbName]).todos)},e.a=i},function(t,e,o){"use strict";function i(){this.defaultTemplate='<li data-id="{{id}}" class="{{completed}}"><div class="view"><input class="toggle" type="checkbox" {{checked}}><label>{{title}}</label><button class="destroy"></button></div></li>'}var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=function(t){return n[t]},l=new RegExp(/[&<>"'`]/g.source),c=function(t){return t&&l.test(t)?t.replace(/[&<>"'`]/g,r):t};i.prototype.show=function(t){var e,o,i="";for(e=0,o=t.length;e<o;e++){var n=this.defaultTemplate,r="",l="";t[e].completed&&(r="completed",l="checked"),n=n.replace("{{id}}",t[e].id),n=n.replace("{{title}}",c(t[e].title)),n=n.replace("{{completed}}",r),n=n.replace("{{checked}}",l),i+=n}return i},i.prototype.itemCounter=function(t){return"<strong>"+t+"</strong> item"+(1===t?"":"s")+" left"},i.prototype.clearCompletedButton=function(t){return t>0?"Clear completed":""},e.a=i},function(t,e,o){"use strict";function i(t){this.template=t,this.ENTER_KEY=13,this.ESCAPE_KEY=27,this.$todoList=o.i(n.b)(".todo-list"),this.$todoItemCounter=o.i(n.b)(".todo-count"),this.$clearCompleted=o.i(n.b)(".clear-completed"),this.$main=o.i(n.b)(".main"),this.$footer=o.i(n.b)(".footer"),this.$toggleAll=o.i(n.b)(".toggle-all"),this.$newTodo=o.i(n.b)(".new-todo")}var n=o(0);i.prototype._removeItem=function(t){var e=o.i(n.b)('[data-id="'+t+'"]');e&&this.$todoList.removeChild(e)},i.prototype._clearCompletedButton=function(t,e){this.$clearCompleted.innerHTML=this.template.clearCompletedButton(t),this.$clearCompleted.style.display=e?"block":"none"},i.prototype._setFilter=function(t){o.i(n.b)(".filters .selected").className="",o.i(n.b)('.filters [href="#/'+t+'"]').className="selected"},i.prototype._elementComplete=function(t,e){var i=o.i(n.b)('[data-id="'+t+'"]');i&&(i.className=e?"completed":"",o.i(n.b)("input",i).checked=e)},i.prototype._editItem=function(t,e){var i=o.i(n.b)('[data-id="'+t+'"]');if(i){i.className=i.className+" editing";var r=document.createElement("input");r.className="edit",i.appendChild(r),r.focus(),r.value=e}},i.prototype._editItemDone=function(t,e){var i=o.i(n.b)('[data-id="'+t+'"]');if(i){var r=o.i(n.b)("input.edit",i);i.removeChild(r),i.className=i.className.replace("editing",""),o.i(n.c)("label",i).forEach(function(t){t.textContent=e})}},i.prototype.render=function(t,e){var o=this;({showEntries:function(){o.$todoList.innerHTML=o.template.show(e)},removeItem:function(){o._removeItem(e)},updateElementCount:function(){o.$todoItemCounter.innerHTML=o.template.itemCounter(e)},clearCompletedButton:function(){o._clearCompletedButton(e.completed,e.visible)},contentBlockVisibility:function(){o.$main.style.display=o.$footer.style.display=e.visible?"block":"none"},toggleAll:function(){o.$toggleAll.checked=e.checked},setFilter:function(){o._setFilter(e)},clearNewTodo:function(){o.$newTodo.value=""},elementComplete:function(){o._elementComplete(e.id,e.completed)},editItem:function(){o._editItem(e.id,e.title)},editItemDone:function(){o._editItemDone(e.id,e.title)}})[t]()},i.prototype._itemId=function(t){var e=o.i(n.d)(t,"li");return parseInt(e.dataset.id,10)},i.prototype._bindItemEditDone=function(t){var e=this;o.i(n.e)(e.$todoList,"li .edit","blur",function(){this.dataset.iscanceled||t({id:e._itemId(this),title:this.value})}),o.i(n.e)(e.$todoList,"li .edit","keypress",function(t){t.keyCode===e.ENTER_KEY&&this.blur()})},i.prototype._bindItemEditCancel=function(t){var e=this;o.i(n.e)(e.$todoList,"li .edit","keyup",function(o){o.keyCode===e.ESCAPE_KEY&&(this.dataset.iscanceled=!0,this.blur(),t({id:e._itemId(this)}))})},i.prototype.bind=function(t,e){var i=this;"newTodo"===t?o.i(n.a)(i.$newTodo,"change",function(){e(i.$newTodo.value)}):"removeCompleted"===t?o.i(n.a)(i.$clearCompleted,"click",function(){e()}):"toggleAll"===t?o.i(n.a)(i.$toggleAll,"click",function(){e({completed:this.checked})}):"itemEdit"===t?o.i(n.e)(i.$todoList,"li label","dblclick",function(){e({id:i._itemId(this)})}):"itemRemove"===t?o.i(n.e)(i.$todoList,".destroy","click",function(){e({id:i._itemId(this)})}):"itemToggle"===t?o.i(n.e)(i.$todoList,".toggle","click",function(){e({id:i._itemId(this),completed:this.checked})}):"itemEditDone"===t?i._bindItemEditDone(e):"itemEditCancel"===t&&i._bindItemEditCancel(e)},e.a=i},function(t,e){}]);
//# sourceMappingURL=bundle.js.map